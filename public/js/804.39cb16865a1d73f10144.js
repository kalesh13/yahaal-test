(self.webpackChunk=self.webpackChunk||[]).push([[804],{2957:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});const s={name:"GenderSelector",props:["value"],data:function(){return{gender:this.value&&this.value.gender||""}},watch:{gender:function(t){this.$emit("input",{gender:t})}}}},1159:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>u});var s=n(7686),r=n.n(s),a=n(9009),i=n(94),o=n(1699);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const u={name:"Filters",data:function(){return{filter_by:"",conditions:"",filtered_result:!1,df:new(r())}},watch:{filter_by:function(){this.df.errors={}}},methods:{submit:function(){var t=c(c({},this.conditions),{},{filter_by:this.filter_by}),e="/api/users?"+this.getQuery(t);this.df.fetchData(e,this.onSuccess)},onSuccess:function(t){this.filtered_result=!0,this.$emit("filteredUsers",t)},getQuery:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&null!==t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},clearFilter:function(){this.filter_by="",this.conditions="",this.filtered_result=!1,this.$emit("onReset")}},components:{GenderSelector:i.default,NameSelector:a.default,LocationSelector:o.default}}},2245:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});const s={name:"LocationSelector",props:["value","locations"],data:function(){return{location:this.value&&this.value.location||"",radius:this.value&&this.value.radius||200}},watch:{location:function(t){this.$emit("input",{location:t,radius:this.radius})},radius:function(t){this.$emit("input",{location:this.location,radius:t})}},computed:{radiusText:function(){return"Within ".concat(this.radius,"km radius")}}}},5703:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});const s={name:"NameSelector",props:["value"],data:function(){return{character:this.value&&this.value.character||""}},watch:{character:function(t){this.$emit("input",{character:t})}}}},8705:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var s=n(3311);const r={name:"Map",props:["users","apiKey"],mounted:function(){var t=this;new s.Loader({apiKey:this.apiKey,version:"weekly"}).load().then((function(){t.map=new google.maps.Map(t.$refs.map,{center:{lat:51.509865,lng:-.118092},zoom:4}),t.users.length>0&&t.initMarkers(t.users)}))},data:function(){return{map:null,markers:[]}},watch:{users:function(t){google&&this.initMarkers(t)}},methods:{initMarkers:function(t){var e=this;this.clearMarkers(),t.forEach((function(t){return e.addMarkers(t)}))},addMarkers:function(t){var e=this,n="male"===t.gender.toLowerCase(),s=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lon),icon:"http://maps.google.com/mapfiles/ms/icons/".concat(n?"blue":"pink","-dot.png"),map:this.map});this.markers.push(s);var r=new google.maps.InfoWindow({content:this.infoWindowForUser(t,n)});s.addListener("click",(function(){r.open(e.map,s)}))},infoWindowForUser:function(t,e){var n=e?"fas fa-male":"fas fa-female";return'\n            <div class="info-content">\n                <div class="name">\n                    <strong>'.concat([t.first_name,t.last_name].join(" "),'</strong>\n                    <div class="gender">\n                        <span class="').concat(n,'"></span>\n                    </div>\n                </div>\n                <div class="position">\n                    <span class="fas fa-globe"></span>\n                    <span>').concat([t.lat,t.lon].join(", "),"</span>\n                </div>\n            </div>\n            ")},clearMarkers:function(){(this.markers||[]).forEach((function(t){return t.setMap(null)})),this.markers=[]}}}},9960:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var s=n(5352),r=n(3193);const a={name:"Sidebar",components:{Stats:s.default,Filters:r.default}}},4771:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var s=n(3136),r=n(7686),a=n.n(r);const i={name:"Stats",mounted:function(){this.df.fetchData(null,this.onSuccess)},data:function(){return{stats:{male:0,female:0},df:new(a())("/api/stats")}},methods:{onSuccess:function(t){this.stats=t}},components:{StatsCard:s.default}}},3306:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});const s={name:"StatsCard",props:["icon","label","count","loading"]}},3489:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var s=n(17),r=n(1499),a=n(7686),i=n.n(a);const o={name:"HomePage",props:["api"],mounted:function(){this.initFetch()},data:function(){return{users:[],df:new(i())("/api/users")}},methods:{initFetch:function(){this.df.fetchData(null,this.onSuccess)},onSuccess:function(t){this.users=t}},components:{Sidebar:r.default,MapWidget:s.default}}},94:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var s=n(8934),r=n(1299),a={};for(const t in r)"default"!==t&&(a[t]=()=>r[t]);n.d(e,a);const i=(0,n(1900).default)(r.default,s.render,s.staticRenderFns,!1,null,null,null).exports},3193:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var s=n(5112),r=n(6085),a={};for(const t in r)"default"!==t&&(a[t]=()=>r[t]);n.d(e,a);const i=(0,n(1900).default)(r.default,s.render,s.staticRenderFns,!1,null,null,null).exports},1699:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var s=n(5102),r=n(2911),a={};for(const t in r)"default"!==t&&(a[t]=()=>r[t]);n.d(e,a);const i=(0,n(1900).default)(r.default,s.render,s.staticRenderFns,!1,null,null,null).exports},9009:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var s=n(4835),r=n(7461),a={};for(const t in r)"default"!==t&&(a[t]=()=>r[t]);n.d(e,a);const i=(0,n(1900).default)(r.default,s.render,s.staticRenderFns,!1,null,null,null).exports},17:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var s=n(3051),r=n(8346),a={};for(const t in r)"default"!==t&&(a[t]=()=>r[t]);n.d(e,a);const i=(0,n(1900).default)(r.default,s.render,s.staticRenderFns,!1,null,null,null).exports},1499:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var s=n(8052),r=n(8075),a={};for(const t in r)"default"!==t&&(a[t]=()=>r[t]);n.d(e,a);const i=(0,n(1900).default)(r.default,s.render,s.staticRenderFns,!1,null,null,null).exports},5352:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var s=n(941),r=n(3347),a={};for(const t in r)"default"!==t&&(a[t]=()=>r[t]);n.d(e,a);const i=(0,n(1900).default)(r.default,s.render,s.staticRenderFns,!1,null,null,null).exports},3136:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var s=n(6303),r=n(9909),a={};for(const t in r)"default"!==t&&(a[t]=()=>r[t]);n.d(e,a);const i=(0,n(1900).default)(r.default,s.render,s.staticRenderFns,!1,null,null,null).exports},6804:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var s=n(9679),r=n(7871),a={};for(const t in r)"default"!==t&&(a[t]=()=>r[t]);n.d(e,a);const i=(0,n(1900).default)(r.default,s.render,s.staticRenderFns,!1,null,null,null).exports},1299:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var s=n(2957),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r);const a=s.default},6085:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var s=n(1159),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r);const a=s.default},2911:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var s=n(2245),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r);const a=s.default},7461:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var s=n(5703),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r);const a=s.default},8346:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var s=n(8705),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r);const a=s.default},8075:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var s=n(9960),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r);const a=s.default},3347:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var s=n(4771),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r);const a=s.default},9909:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var s=n(3306),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r);const a=s.default},7871:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var s=n(3489),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r);const a=s.default},8934:(t,e,n)=>{"use strict";n.r(e);var s=n(8778),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r)},5112:(t,e,n)=>{"use strict";n.r(e);var s=n(8210),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r)},5102:(t,e,n)=>{"use strict";n.r(e);var s=n(7271),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r)},4835:(t,e,n)=>{"use strict";n.r(e);var s=n(3158),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r)},3051:(t,e,n)=>{"use strict";n.r(e);var s=n(9281),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r)},8052:(t,e,n)=>{"use strict";n.r(e);var s=n(8949),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r)},941:(t,e,n)=>{"use strict";n.r(e);var s=n(1428),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r)},6303:(t,e,n)=>{"use strict";n.r(e);var s=n(6451),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r)},9679:(t,e,n)=>{"use strict";n.r(e);var s=n(415),r={};for(const t in s)"default"!==t&&(r[t]=()=>s[t]);n.d(e,r)},8778:(t,e,n)=>{"use strict";n.r(e),n.d(e,{render:()=>s,staticRenderFns:()=>r});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"selector pt-2 pb-1"},[n("div",{staticClass:"section-title"},[t._v("Choose gender")]),n("form",{on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"form-group d-flex align-items-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.gender,expression:"gender"}],attrs:{type:"radio",name:"gender",value:"Male"},domProps:{checked:t._q(t.gender,"Male")},on:{change:function(e){t.gender="Male"}}}),n("span",[t._v("Male")])]),n("div",{staticClass:"form-group d-flex align-items-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.gender,expression:"gender"}],attrs:{type:"radio",name:"gender",value:"Female"},domProps:{checked:t._q(t.gender,"Female")},on:{change:function(e){t.gender="Female"}}}),n("span",[t._v("Female")])])])])},r=[]},8210:(t,e,n)=>{"use strict";n.r(e),n.d(e,{render:()=>s,staticRenderFns:()=>r});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"filters-container"},[t._m(0),n("div",{staticClass:"filters"},[n("div",{staticClass:"section-title"},[t._v("Filter by")]),n("form",{on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"form-group d-flex align-items-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filter_by,expression:"filter_by"}],attrs:{type:"radio",name:"filter_by",value:"gender"},domProps:{checked:t._q(t.filter_by,"gender")},on:{change:function(e){t.filter_by="gender"}}}),n("span",[t._v("Gender")])]),n("div",{staticClass:"form-group d-flex align-items-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filter_by,expression:"filter_by"}],attrs:{type:"radio",name:"filter_by",value:"name"},domProps:{checked:t._q(t.filter_by,"name")},on:{change:function(e){t.filter_by="name"}}}),n("span",[t._v("Name")])]),n("div",{staticClass:"form-group d-flex align-items-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filter_by,expression:"filter_by"}],attrs:{type:"radio",name:"filter_by",value:"location"},domProps:{checked:t._q(t.filter_by,"location")},on:{change:function(e){t.filter_by="location"}}}),n("span",[t._v("Location")])])]),"gender"===t.filter_by?n("gender-selector",{model:{value:t.conditions,callback:function(e){t.conditions=e},expression:"conditions"}}):t._e(),"name"===t.filter_by?n("name-selector",{model:{value:t.conditions,callback:function(e){t.conditions=e},expression:"conditions"}}):t._e(),"location"===t.filter_by?n("location-selector",{attrs:{locations:["London","Paris","Kansas City"]},model:{value:t.conditions,callback:function(e){t.conditions=e},expression:"conditions"}}):t._e(),""!==t.filter_by&&t.df.errors?n("ul",{staticClass:"errors"},[t.df.errors.server_error?n("li",{domProps:{textContent:t._s(t.df.errors.server_error)}}):t._l(t.df.errors,(function(e,s){return n("li",{key:s,domProps:{textContent:t._s(e[0])}})}))],2):t._e(),n("div",{staticClass:"d-flex align-items-center mb-1"},[t.filtered_result?n("a",{staticClass:"reset",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.clearFilter(e)}}},[t._v("Reset filter")]):t._e(),""!==t.filter_by?n("button",{staticClass:"theme-btn",attrs:{disabled:t.df.fetching},on:{click:t.submit}},[t.df.fetching?n("span",{staticClass:"fas fa-circle-notch fa-spin"}):t._e(),t._v("Apply filter")]):t._e()])],1)])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title px-1"},[n("span",{staticClass:"fas fa-filter"}),t._v("Filter")])}]},7271:(t,e,n)=>{"use strict";n.r(e),n.d(e,{render:()=>s,staticRenderFns:()=>r});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"selector pt-2 pb-1"},[n("div",{staticClass:"section-title"},[t._v("Choose location")]),n("form",{on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"form-group"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.location,expression:"location"}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.location=e.target.multiple?n:n[0]}}},[n("option",{attrs:{selected:"",value:"",disabled:""}},[t._v("Choose location")]),t._l(t.locations,(function(e,s){return n("option",{key:s,domProps:{value:e,textContent:t._s(e)}})}))],2)]),t.location?n("div",{staticClass:"form-group slider-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.radius,expression:"radius"}],staticClass:"slider",attrs:{type:"range",min:"10",max:"2000"},domProps:{value:t.radius},on:{__r:function(e){t.radius=e.target.value}}}),n("div",{staticClass:"small",domProps:{textContent:t._s(t.radiusText)}})]):t._e()])])},r=[]},3158:(t,e,n)=>{"use strict";n.r(e),n.d(e,{render:()=>s,staticRenderFns:()=>r});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"selector pt-2 pb-1"},[n("div",{staticClass:"section-title"},[t._v("Starting with")]),n("form",{on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.character,expression:"character"}],staticClass:"form-control",attrs:{name:"character",placeholder:"Starting character of firstname/lastname",maxlength:"1"},domProps:{value:t.character},on:{input:function(e){e.target.composing||(t.character=e.target.value)}}})])])])},r=[]},9281:(t,e,n)=>{"use strict";n.r(e),n.d(e,{render:()=>s,staticRenderFns:()=>r});var s=function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"map",staticClass:"map w-100"})},r=[]},8949:(t,e,n)=>{"use strict";n.r(e),n.d(e,{render:()=>s,staticRenderFns:()=>r});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidebar"},[n("stats"),n("filters",t._g({},t.$listeners))],1)},r=[]},1428:(t,e,n)=>{"use strict";n.r(e),n.d(e,{render:()=>s,staticRenderFns:()=>r});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stats-container mb-3"},[t._m(0),n("div",{staticClass:"stats"},[n("stats-card",{attrs:{icon:"fa-male",label:"Males",count:t.stats.male,loading:t.df.fetching}}),n("stats-card",{attrs:{icon:"fa-female",label:"Females",count:t.stats.female,loading:t.df.fetching}})],1)])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title px-1"},[n("span",{staticClass:"fas fa-info-circle"}),t._v("Total Stats")])}]},6451:(t,e,n)=>{"use strict";n.r(e),n.d(e,{render:()=>s,staticRenderFns:()=>r});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stats-card"},[n("div",{staticClass:"value"},[t.loading?n("span",{staticClass:"fas fa-circle-notch fa-spin"}):[t._v(t._s(t.count))]],2),n("div",{staticClass:"label"},[n("strong",{domProps:{textContent:t._s(t.label)}})])])},r=[]},415:(t,e,n)=>{"use strict";n.r(e),n.d(e,{render:()=>s,staticRenderFns:()=>r});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"container"},[n("sidebar",{staticClass:"col-4",on:{filteredUsers:t.onSuccess,onReset:t.initFetch}}),n("div",{staticClass:"map-container w-100 px-2 d-flex"},[n("map-widget",{attrs:{users:t.users,"api-key":t.api}})],1)],1)},r=[]}}]);